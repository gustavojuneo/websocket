{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import { FastifyInstance, FastifyPluginAsync } from \"fastify\";\nimport fp from \"fastify-plugin\";\nimport { Server, ServerOptions } from \"socket.io\";\n\nconst fastifySocketIO: FastifyPluginAsync<Partial<ServerOptions>> = fp(\n  async function (fastify, opts) {\n    fastify.decorate(\"io\", new Server(fastify.server, opts));\n    fastify.addHook(\"onClose\", (fastify: FastifyInstance, done) => {\n      (fastify as any).io.close();\n      done();\n    });\n  },\n  { fastify: \">=4.x.x\", name: \"fastify-socket.io\" }\n);\n\nexport default fastifySocketIO;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,4BAAe;AACf,oBAAsC;AAEtC,MAAM,sBAA8D,sBAAAA;AAAA,EAClE,eAAgB,SAAS,MAAM;AAC7B,YAAQ,SAAS,MAAM,IAAI,qBAAO,QAAQ,QAAQ,IAAI,CAAC;AACvD,YAAQ,QAAQ,WAAW,CAACC,UAA0B,SAAS;AAC7D,MAACA,SAAgB,GAAG,MAAM;AAC1B,WAAK;AAAA,IACP,CAAC;AAAA,EACH;AAAA,EACA,EAAE,SAAS,WAAW,MAAM,oBAAoB;AAClD;AAEA,IAAO,cAAQ;","names":["fp","fastify"]}